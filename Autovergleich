<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Autovergleich</title>
  <style>
    /* === Farben & Layout wie im Handyvergleich === */
    :root {
      color-scheme: light dark;
      font-family: "Segoe UI", Roboto, sans-serif;
      --bg: #f4f6fb;
      --card: #ffffffcc;
      --primary: #2f59d1;
      --primary-dark: #1f3d91;
      --border: #d9dce5;
      --text-muted: #5e6471;
    }
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(160deg, #e5ecff 0%, #f7f8ff 35%, #ffffff 100%);
      display: flex;
      justify-content: center;
      padding: 32px 16px 64px;
      color: #1b1f2a;
    }
    main {
      width: min(2100px, 100%);
      display: grid;
      gap: 32px;
    }
    header h1 {
      margin: 0;
      font-size: clamp(2.1rem, 1.5rem + 1.8vw, 2.8rem);
      font-weight: 700;
    }
    header p {
      margin: 8px 0 0;
      color: var(--text-muted);
      max-width: 720px;
    }
    .card {
      background: var(--card);
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 24px 50px -28px rgba(47, 89, 209, 0.4);
      border: 1px solid var(--border);
    }
    form { display: grid; gap: 16px; }
    .grid { display: grid; gap: 16px; }
    @media (min-width: 720px) {
      .grid.two { grid-template-columns: repeat(2, 1fr); }
      .grid.three { grid-template-columns: repeat(3, 1fr); }
      .grid.four { grid-template-columns: repeat(4, 1fr); }
    }
    label { display: grid; gap: 6px; font-weight: 600; font-size: 0.95rem; }
    input, select {
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      font-size: 1rem;
    }
    button {
      border: none;
      border-radius: 14px;
      padding: 12px 18px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: var(--primary);
      color: white;
    }
    button:hover { background: var(--primary-dark); }
    .button-secondary { background: #e1e4eb; color: #1b1f2a; }
    .empty { padding: 32px; text-align: center; color: var(--text-muted); }
    .table-wrapper { overflow-x: auto; padding: 12px 16px; }
    .comparison-table { display: flex; flex-direction: column; gap: 0; }
    .table-row { display: grid; grid-template-columns: repeat(8, 1fr); column-gap: 16px; }
    .table-row.table-header { border-bottom: 1px solid var(--border); font-size: 0.8rem; font-weight: 700; }
    .cell { padding: 6px; font-size: 0.95rem; }
    .highlight { background: rgba(47, 89, 209, 0.1); }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>Autovergleich</h1>
      <p>Vergleiche Fahrzeuge anhand von Preis, Laufleistung, Erstzulassung und weiteren Kriterien.</p>
    </header>

    <!-- Formular -->
    <section class="card">
      <h2>Fahrzeug hinzufügen</h2>
      <form id="car-form">
        <div class="grid two">
          <label>
            Händler / Plattform
            <input type="text" name="dealer" placeholder="z.B. mobile.de" required />
          </label>
          <label>
            Modell
            <input type="text" name="model" placeholder="z.B. VW Polo 1.0 TSI" required />
          </label>
        </div>
        <div class="grid four">
          <label>
            Preis (€)
            <input type="number" name="price" step="0.01" min="0" required />
          </label>
          <label>
            Erstzulassung (YYYY-MM)
            <input type="text" name="registration" placeholder="2020-05" />
          </label>
          <label>
            Kilometerstand
            <input type="number" name="mileage" min="0" step="1000" />
          </label>
          <label>
            Leistung (PS)
            <input type="number" name="power" min="0" />
          </label>
        </div>
        <div class="grid two">
          <label>
            Getriebe
            <select name="gearbox">
              <option value="Manuell">Manuell</option>
              <option value="Automatik">Automatik</option>
            </select>
          </label>
          <label>
            Verbrauch (l/100km)
            <input type="number" name="consumption" min="0" step="0.1" />
          </label>
        </div>
        <div class="grid two">
          <label>
            Fahrzeugklasse
            <input type="text" name="class" placeholder="Kleinwagen, Kompakt…" />
          </label>
          <label>
            Inserat-Link
            <input type="url" name="link" placeholder="https://…" />
          </label>
        </div>
        <div>
          <label>
            Extras / Notizen
            <input type="text" name="notes" placeholder="z.B. Klimaautomatik, LED" />
          </label>
        </div>
        <button type="submit">Fahrzeug speichern</button>
      </form>
    </section>

    <!-- Übersicht -->
    <section class="card">
      <h2>Überblick</h2>
      <div id="overview">
        <p class="empty">Noch keine Fahrzeuge eingetragen.</p>
      </div>
    </section>
  </main>

  <script>
    const form = document.getElementById('car-form');
    const overview = document.getElementById('overview');
    const STORAGE_KEY = 'autovergleich-cars';
    let cars = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

    function saveCars() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(cars));
    }

    function render() {
      overview.innerHTML = '';
      if (!cars.length) {
        overview.innerHTML = '<p class="empty">Noch keine Fahrzeuge eingetragen.</p>';
        return;
      }
      const wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      const table = document.createElement('div');
      table.className = 'comparison-table';
      // Header
      const header = document.createElement('div');
      header.className = 'table-row table-header';
      ['Händler', 'Modell', 'Preis', 'EZ', 'KM', 'PS', 'Getriebe', 'Details'].forEach(h => {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.textContent = h;
        header.appendChild(cell);
      });
      table.appendChild(header);
      // Rows
      cars.forEach(car => {
        const row = document.createElement('div');
        row.className = 'table-row';
        [car.dealer, car.model, car.price + ' €', car.registration || '—', 
         car.mileage ? car.mileage + ' km' : '—',
         car.power ? car.power + ' PS' : '—',
         car.gearbox || '—',
         car.notes || ''].forEach(val => {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.textContent = val;
          row.appendChild(cell);
        });
        table.appendChild(row);
      });
      wrapper.appendChild(table);
      overview.appendChild(wrapper);
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      cars.push(data);
      saveCars();
      form.reset();
      render();
    });

    render();
  </script>
</body>
</html>
